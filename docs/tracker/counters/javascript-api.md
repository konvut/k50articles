service: tracker
service_name: K☆50:Трекер
last_modified: 2016-03-09

#Список Javascript методов

##init
Инициализирует счетчик с заданнымим параметрами. 

```js
init({
      siteId:<integer>,
      landing:<string>,
      label:<string>
     })
```

**Жирным** обозначены обязательные параметры.

|Параметр|Описание|
|-----|----|
|**siteId**|Идентификатор счетчика. Обязательный параметр|
|landing|URL страницы. Позволяет перезаписывать URL, определенный по умолчанию|
|label|Пользовательская метка. Любой параметр, который вы хотите передать в счетчик, чтобы его использовать в трекер. Например, можно передавать регион.|
|callback|Функция, которая будет вызвана после инициализации счетчика. Например, можно записать идентификатор текущего сеанса, выданный трекером|

**Пример**

```js
<script src="http://cdn.k50.ru/k50/k50tracker2.js"></script>
<script>
var k50TrackerInstance = k50Tracker.init(
   {
    siteId: 1234567, 
    landing: 'test.ru', 
    label: 'msk', 
    callback: function(e){/*your code here*/}
    }
);
</script>
```


##change
Принудительно запускает подмену номеров. Используется при загрузке контента с номерами телефонов с помощью ajax.

```js
change()
```

**Пример**

```js
<script>
k50TrackerInstance.change();
</script>
```

##getResultData
Возвращает идентификаторы сеанса и пользователя, а также список выданных номеров пользователю (при использовании коллтрекинга)

```js
getResultData()
```

**Пример**

```js
<script>
k50TrackerInstance.getResultData();
</script>
```

Возращаемые параметры

```json
{
sid: <string>, 
uuid: <string>, 
phones: [
          {
            number: <integer>,
            number_formatted: <string>
          },
          ...
        ]
}        
```

|Параметр|Описание|
|----|----|
|sid|Идентификатор сеанса|
|uuid|Идентификатор пользователя|
|phones|Список номеров телефонов, зарезервированных за пользователем. Каждый телефон задаётся в виде объекта phoneInfo|

**Объект phoneInfo**

|Параметр|Описание|
|----|----|
|number|Номер телефон в формате **7XXXXXXXXXX**|
|number_formatted|Номер телефона в заданном форматировании. Например, **+7 (XXX) XXX-XX-XX**|